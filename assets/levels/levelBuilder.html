<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Game Board Shape Editor</title>
    <style>
        body {
            font-family: system-ui, sans-serif;
            padding: 20px;
        }

        .controls {
            margin-bottom: 12px;
        }

        .grid {
            display: grid;
            gap: 2px;
            margin-bottom: 12px;
        }

        .cell {
            width: 32px;
            height: 32px;
            border: 1px solid #ccc;
            cursor: pointer;
            background: #222;
        }

        .cell.off {
            background: #f5f5f5;
        }

        textarea {
            width: 100%;
            height: 220px;
            font-family: monospace;
        }
    </style>
</head>

<body>

    <h2>Game Board Shape Editor</h2>

    <div class="controls">
        Level: <input id="level" type="number" value="21" min="1" style="width:70px" />
        Bombs: <input id="bombs" type="number" value="11" min="0" style="width:70px" /><br /><br />
        Rows: <input id="rows" type="number" value="10" min="1" style="width:60px" />
        Cols: <input id="cols" type="number" value="10" min="1" style="width:60px" />
        <button onclick="buildGrid()">Build Grid</button>
        <button onclick="exportJSON()">Export JSON</button>
    </div>

    <div id="grid" class="grid"></div>

    <h3>Output</h3>
    <button onclick="copyOutput()">Copy to Clipboard</button>
    <textarea id="output" readonly></textarea>

    <script>
        let shape = [];

        function buildGrid() {
            const rows = Number(document.getElementById('rows').value);
            const cols = Number(document.getElementById('cols').value);

            shape = Array.from({ length: rows }, () => Array(cols).fill(1));

            const grid = document.getElementById('grid');
            grid.style.gridTemplateColumns = `repeat(${cols}, 32px)`;
            grid.innerHTML = '';

            shape.forEach((row, r) => {
                row.forEach((value, c) => {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.onclick = () => toggleCell(cell, r, c);
                    grid.appendChild(cell);
                });
            });
        }
        function copyOutput() {
            const output = document.getElementById('output');
            output.select();
            output.setSelectionRange(0, 99999);
            document.execCommand('copy');
        }

        function toggleCell(cell, r, c) {
            shape[r][c] = shape[r][c] === 1 ? 0 : 1;
            cell.classList.toggle('off', shape[r][c] === 0);
        }

        function exportJSON() {
            const rows = shape.length;
            const cols = shape[0].length;
            const tiles = rows * cols;

            const shapeLines = shape
                .map(row => `    [${row.join(',')}]`)
                .join(',\n');

            const json =
                `{
  "level": ${Number(level.value)},
  "rows": ${rows},
  "cols": ${cols},
  "tiles": ${tiles},
  "bombs": ${Number(bombs.value)},
  "shape": [
${shapeLines}
  ]
},`;

            output.value = json;
        }

        buildGrid();
    </script>

</body>

</html>